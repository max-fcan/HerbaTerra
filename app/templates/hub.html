{% extends "base.html" %}

{% block title %}Hub | HerbaTerra{% endblock %}
{% block body_class %}hub-page{% endblock %}

{% block head_extras %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/pages/hub.css') }}"
/>
{% endblock %}

{% block content %}
<section class="hub-shell container-fluid">
  <div class="hub-grid">
    <aside class="hub-left-card">
      <div class="hub-map-frame">
        <div id="hub-map" class="hub-map" aria-label="Interactive country map"></div>
        <details class="hub-map-help">
          <summary class="hub-map-help-btn">Help / Aide</summary>
          <div class="hub-map-help-panel" role="note" aria-live="polite">
            Cliquez sur un pays pour ouvrir les actions.
            Dans la popup, choisissez Explorer ou Jouer pour ce pays.
            Utilisez les options de la popup pour passer au niveau continent.
            Pour une partie monde entier, utilisez le bouton Play (world) sous la carte.
          </div>
        </details>
      </div>
      <a class="btn btn-theme btn-hub btn-hub-play rounded-pill hub-play-world-btn" href="/play"
        >Play (world)</a
      >
    </aside>

    <aside class="hub-actions">
      <div
        class="hub-feature-card hub-catalogue-card"
        style="background-image: url('{{ url_for('static', filename='img/catalogue.webp') }}')"
      >
        <a class="btn btn-theme btn-hub btn-hub-explore rounded-pill hub-feature-btn" href="{{ url_for('catalogue.catalogue') }}"
          >Catalogue</a
        >
      </div>
      <div
        class="hub-feature-card hub-daily-card"
        style="background-image: url('{{ url_for('static', filename='img/daily_challenge.jpg') }}')"
      >
        <a class="btn btn-theme btn-hub btn-hub-explore rounded-pill hub-feature-btn" href="#"
          >Daily Challenge (WIP)</a
        >
      </div>
    </aside>
  </div>
</section>
{% endblock %}

{% block scripts %}
<template id="hub-country-popup-template">
  {% include "partials/hub_country_popup.html" %}
</template>

<script>
  window.__hubMapBootstrap = {
    geojsonUrl: {{ geojson_url | tojson }},
    continentNamesByIsoCode: {{ continent_names_by_iso_code | tojson }},
    continentCodesByName: {{ continent_codes_by_name | tojson }},
    countryCodeA2ByIsoCode: {{ country_code_a2_by_iso_code | tojson }},
    catalogueBaseUrl: {{ url_for("catalogue.catalogue") | tojson }},
    playBaseUrl: {{ url_for("play.play_home") | tojson }}
  };
</script>
<script
  type="module"
  src="{{ url_for('static', filename='js/hub-map.js') }}"
></script>
{% endblock %}
